[INFO] 2019-12-10 18:40:47.862 org.springframework.boot.StartupInfoLogger.logStarting(StartupInfoLogger.java:48) Starting FaceApplication on admin-PC with PID 16416 (F:\Ellison\faceRenlian\target\classes started by admin in F:\Ellison\faceRenlian)
[INFO] 2019-12-10 18:40:47.864 org.springframework.boot.SpringApplication.logStartupProfileInfo(SpringApplication.java:597) The following profiles are active: product
[INFO] 2019-12-10 18:40:48.224 org.springframework.context.support.AbstractApplicationContext.prepareRefresh(AbstractApplicationContext.java:583) Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7c214cc0: startup date [Tue Dec 10 18:40:48 CST 2019]; root of context hierarchy
[INFO] 2019-12-10 18:40:48.762 org.hibernate.validator.internal.util.Version.<clinit>(Version.java:30) HV000001: Hibernate Validator 5.3.6.Final
[INFO] 2019-12-10 18:41:08.713 org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:89) Tomcat initialized with port(s): 8099 (http)
[INFO] 2019-12-10 18:41:10.104 org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.prepareEmbeddedWebApplicationContext(EmbeddedWebApplicationContext.java:276) Root WebApplicationContext: initialization completed in 21882 ms
[INFO] 2019-12-10 18:41:10.487 org.springframework.boot.web.servlet.ServletRegistrationBean.onStartup(ServletRegistrationBean.java:190) Mapping servlet: 'dispatcherServlet' to [/]
[INFO] 2019-12-10 18:41:10.488 org.springframework.boot.web.servlet.ServletRegistrationBean.onStartup(ServletRegistrationBean.java:190) Mapping servlet: 'statViewServlet' to [/druid/*]
[INFO] 2019-12-10 18:41:10.490 org.springframework.boot.web.servlet.AbstractFilterRegistrationBean.configure(AbstractFilterRegistrationBean.java:258) Mapping filter: 'characterEncodingFilter' to: [/*]
[INFO] 2019-12-10 18:41:10.491 org.springframework.boot.web.servlet.AbstractFilterRegistrationBean.configure(AbstractFilterRegistrationBean.java:258) Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
[INFO] 2019-12-10 18:41:10.491 org.springframework.boot.web.servlet.AbstractFilterRegistrationBean.configure(AbstractFilterRegistrationBean.java:258) Mapping filter: 'httpPutFormContentFilter' to: [/*]
[INFO] 2019-12-10 18:41:10.491 org.springframework.boot.web.servlet.AbstractFilterRegistrationBean.configure(AbstractFilterRegistrationBean.java:258) Mapping filter: 'requestContextFilter' to: [/*]
[INFO] 2019-12-10 18:41:10.492 org.springframework.boot.web.servlet.AbstractFilterRegistrationBean.configure(AbstractFilterRegistrationBean.java:271) Mapping filter: 'webStatFilter' to urls: [/*]
[INFO] 2019-12-10 18:41:11.407 com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:854) {dataSource-1} inited
[INFO] 2019-12-10 18:41:11.409 org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:441) Executing SQL script from class path resource [schema.sql]
[INFO] 2019-12-10 18:41:11.417 org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:507) Executed SQL script from class path resource [schema.sql] in 7 ms.
[INFO] 2019-12-10 18:41:11.793 main.java.com.ha.util.LogConfig.logMethod(LogConfig.java:23) ==========print log日志启动==========
[INFO] 2019-12-10 18:41:12.113 org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.initControllerAdviceCache(RequestMappingHandlerAdapter.java:534) Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7c214cc0: startup date [Tue Dec 10 18:40:48 CST 2019]; root of context hierarchy
[INFO] 2019-12-10 18:41:12.319 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/updateState],methods=[GET],produces=[application/json;charset=utf-8]}" onto public int main.java.com.ha.controller.ForwardController.updateState(java.lang.String)
[INFO] 2019-12-10 18:41:12.320 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/getimg],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.util.List<main.java.com.ha.pojo.Employee> main.java.com.ha.controller.ForwardController.showerweima()
[INFO] 2019-12-10 18:41:12.320 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/getWhitecardtask],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.util.List<main.java.com.ha.pojo.WhiteCardTask> main.java.com.ha.controller.ForwardController.getWhitecardtask()
[INFO] 2019-12-10 18:41:12.321 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/insertWhite],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.lang.String main.java.com.ha.controller.ForwardController.insertWhite(java.lang.String)
[INFO] 2019-12-10 18:41:12.321 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/select],methods=[GET],produces=[application/json;charset=utf-8]}" onto public int main.java.com.ha.controller.ForwardController.selectAll()
[INFO] 2019-12-10 18:41:12.322 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/updateWhite],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.lang.String main.java.com.ha.controller.ForwardController.updateWhite(java.lang.String)
[INFO] 2019-12-10 18:41:12.323 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/getIsexist],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.util.List<main.java.com.ha.pojo.ClockWhiteCard> main.java.com.ha.controller.ForwardController.getIsexist(java.lang.String)
[INFO] 2019-12-10 18:41:12.323 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/getWhiteDel],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.util.List<main.java.com.ha.pojo.WhiteCardTask> main.java.com.ha.controller.ForwardController.getWhiteDel()
[INFO] 2019-12-10 18:41:12.323 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/delClockWhite],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.lang.String main.java.com.ha.controller.ForwardController.delClockWhite(java.lang.String)
[INFO] 2019-12-10 18:41:12.323 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/insertTimeRecords],methods=[POST],produces=[application/json;charset=utf-8]}" onto public int main.java.com.ha.controller.ForwardController.insertTimeRecords(java.lang.String)
[INFO] 2019-12-10 18:41:12.324 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/insertTimeRecordsPic],methods=[POST],produces=[application/json;charset=utf-8]}" onto public int main.java.com.ha.controller.ForwardController.insertTimeRecordsPic(java.lang.String)
[INFO] 2019-12-10 18:41:12.324 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/forward/getWhitecardtaskDel],methods=[POST],produces=[application/json;charset=utf-8]}" onto public java.util.List<main.java.com.ha.pojo.WhiteCardTask> main.java.com.ha.controller.ForwardController.getWhitecardtaskDel()
[INFO] 2019-12-10 18:41:12.326 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/hnjca/index],methods=[GET],produces=[application/json;charset=utf-8]}" onto public void main.java.com.ha.controller.HnjcaController.get(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.io.UnsupportedEncodingException
[INFO] 2019-12-10 18:41:12.326 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/hnjca/index],methods=[POST],produces=[application/json;charset=utf-8]}" onto public void main.java.com.ha.controller.HnjcaController.post(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.io.IOException,org.dom4j.DocumentException
[INFO] 2019-12-10 18:41:12.326 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/hnjca/auth],methods=[GET],produces=[application/json;charset=utf-8]}" onto public void main.java.com.ha.controller.HnjcaController.auth(java.lang.String,java.lang.String,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.io.IOException
[INFO] 2019-12-10 18:41:12.328 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
[INFO] 2019-12-10 18:41:12.328 org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:543) Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
[INFO] 2019-12-10 18:41:12.354 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362) Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[INFO] 2019-12-10 18:41:12.355 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362) Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[INFO] 2019-12-10 18:41:12.387 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362) Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
[INFO] 2019-12-10 18:41:12.748 org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:431) Registering beans for JMX exposure on startup
[INFO] 2019-12-10 18:41:12.752 org.springframework.jmx.export.MBeanExporter.autodetect(MBeanExporter.java:916) Bean with name 'statFilter' has been autodetected for JMX exposure
[INFO] 2019-12-10 18:41:12.753 org.springframework.jmx.export.MBeanExporter.autodetect(MBeanExporter.java:916) Bean with name 'dataSource' has been autodetected for JMX exposure
[INFO] 2019-12-10 18:41:12.757 org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:671) Located MBean 'dataSource': registering with JMX server as MBean [com.alibaba.druid.spring.boot.autoconfigure:name=dataSource,type=DruidDataSourceWrapper]
[INFO] 2019-12-10 18:41:12.757 org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:671) Located MBean 'statFilter': registering with JMX server as MBean [com.alibaba.druid.filter.stat:name=statFilter,type=StatFilter]
[INFO] 2019-12-10 18:41:12.971 org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.start(TomcatEmbeddedServletContainer.java:201) Tomcat started on port(s): 8099 (http)
[INFO] 2019-12-10 18:41:12.976 org.springframework.boot.StartupInfoLogger.logStarted(StartupInfoLogger.java:57) Started FaceApplication in 26.6 seconds (JVM running for 28.956)
[INFO] 2019-12-10 18:41:26.258 main.java.com.ha.facecamera.configserver.ConfigServer.start(ConfigServer.java:249) 正在尝试启动配置服务器，预备使用端口10001 启动参数{"sysType":12,"majorProtocol":0,"minorProtocol":9,"heartBeatInterval":5,"forceSetAppConfig":true,"autoRestartStream":true,"expectBandWidth":204800,"noNativeMode":false}
[INFO] 2019-12-10 18:41:26.275 main.java.com.ha.facecamera.configserver.ConfigServer.start(ConfigServer.java:270) 配置服务器启动成功
[INFO] 2019-12-10 18:41:26.284 main.java.com.ha.util.Face$2.run(Face.java:399) 启动数据服务器成功！
[INFO] 2019-12-10 18:41:28.874 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2238) 收到设备版本号回应包 /192.168.0.88:40400 {"sn":"012310-F71A0E-1769EE","protocolVersion":"2.11","firewareVersion":"0.13.17beta","codeVersion":"1156","buildDate":"2019/10/31 18:21:46","sysType":"FaceGate","hardwarePlatform":"HI3516DV300_64G","sensorModel":"IMX327D","algorithmVersion":"HCV1.0","sdkMinVersion":"v0.6.13","faceDemoMinVersion":70}
[INFO] 2019-12-10 18:41:28.877 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2263) 收到设备应用参数回应包 /192.168.0.88:40400 {"deviceNo":"012310-F71A0E-1769EE","addrNo":"","addrName":"","heartBeatInterval":5,"cloundConfigEnable":1,"cloundConfigPort":10001,"cloundConfigIp":"192.168.0.100","dataUploadMethod":1,"dataUploadPort":10002,"dataUploadServer":"192.168.0.100","dataUploadUrl":null,"compareSwitch":true,"workMode":3,"ensureThreshold":80,"repeatFilter":false,"repeatFilterTime":2,"uploadEnvironmentImage":false,"uploadFeatureImage":true,"ftpUserName":null,"ftpPassword":null,"ageDetect":false,"sexDetect":false,"livingDetect":true,"safetyHatDetect":false,"uploadPhoto":true,"uploadFeature":true,"doReg":false,"regUserName":null,"regPassword":null}
[INFO] 2019-12-10 18:41:29.431 org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:489) FrameworkServlet 'dispatcherServlet': initialization started
[INFO] 2019-12-10 18:41:29.457 org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:508) FrameworkServlet 'dispatcherServlet': initialization completed in 26 ms
[INFO] 2019-12-10 18:41:29.659 main.java.com.ha.util.Face$1.run(Face.java:61) 成功：[]
[INFO] 2019-12-10 18:41:33.930 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40400
[INFO] 2019-12-10 18:41:38.979 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40400
[INFO] 2019-12-10 18:41:44.028 main.java.com.ha.facecamera.configserver.ConfigServer.sessionClosed(ConfigServer.java:2401) sn为012310-F71A0E-1769EE
[INFO] 2019-12-10 18:41:44.029 main.java.com.ha.facecamera.configserver.ConfigServer.sessionClosed(ConfigServer.java:2409) deviceNo为012310-F71A0E-1769EE
[INFO] 2019-12-10 18:41:49.089 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2238) 收到设备版本号回应包 /192.168.0.88:40410 {"sn":"012310-F71A0E-1769EE","protocolVersion":"2.11","firewareVersion":"0.13.17beta","codeVersion":"1156","buildDate":"2019/10/31 18:21:46","sysType":"FaceGate","hardwarePlatform":"HI3516DV300_64G","sensorModel":"IMX327D","algorithmVersion":"HCV1.0","sdkMinVersion":"v0.6.13","faceDemoMinVersion":70}
[INFO] 2019-12-10 18:41:49.090 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2263) 收到设备应用参数回应包 /192.168.0.88:40410 {"deviceNo":"012310-F71A0E-1769EE","addrNo":"","addrName":"","heartBeatInterval":5,"cloundConfigEnable":1,"cloundConfigPort":10001,"cloundConfigIp":"192.168.0.100","dataUploadMethod":1,"dataUploadPort":10002,"dataUploadServer":"192.168.0.100","dataUploadUrl":null,"compareSwitch":true,"workMode":3,"ensureThreshold":80,"repeatFilter":false,"repeatFilterTime":2,"uploadEnvironmentImage":false,"uploadFeatureImage":true,"ftpUserName":null,"ftpPassword":null,"ageDetect":false,"sexDetect":false,"livingDetect":true,"safetyHatDetect":false,"uploadPhoto":true,"uploadFeature":true,"doReg":false,"regUserName":null,"regPassword":null}
[INFO] 2019-12-10 18:41:49.319 main.java.com.ha.util.Face$1.run(Face.java:61) 成功：[]
[INFO] 2019-12-10 18:41:54.149 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40410
[INFO] 2019-12-10 18:41:59.198 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40410
[INFO] 2019-12-10 18:42:04.248 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40410
[INFO] 2019-12-10 18:42:06.268 main.java.com.ha.facecamera.configserver.ConfigServer.sessionClosed(ConfigServer.java:2401) sn为012310-F71A0E-1769EE
[INFO] 2019-12-10 18:42:06.268 main.java.com.ha.facecamera.configserver.ConfigServer.sessionClosed(ConfigServer.java:2409) deviceNo为012310-F71A0E-1769EE
[INFO] 2019-12-10 18:42:11.321 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2238) 收到设备版本号回应包 /192.168.0.88:40420 {"sn":"012310-F71A0E-1769EE","protocolVersion":"2.11","firewareVersion":"0.13.17beta","codeVersion":"1156","buildDate":"2019/10/31 18:21:46","sysType":"FaceGate","hardwarePlatform":"HI3516DV300_64G","sensorModel":"IMX327D","algorithmVersion":"HCV1.0","sdkMinVersion":"v0.6.13","faceDemoMinVersion":70}
[INFO] 2019-12-10 18:42:11.520 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2263) 收到设备应用参数回应包 /192.168.0.88:40420 {"deviceNo":"012310-F71A0E-1769EE","addrNo":"","addrName":"","heartBeatInterval":5,"cloundConfigEnable":1,"cloundConfigPort":10001,"cloundConfigIp":"192.168.0.100","dataUploadMethod":1,"dataUploadPort":10002,"dataUploadServer":"192.168.0.100","dataUploadUrl":null,"compareSwitch":true,"workMode":3,"ensureThreshold":80,"repeatFilter":false,"repeatFilterTime":2,"uploadEnvironmentImage":false,"uploadFeatureImage":true,"ftpUserName":null,"ftpPassword":null,"ageDetect":false,"sexDetect":false,"livingDetect":true,"safetyHatDetect":false,"uploadPhoto":true,"uploadFeature":true,"doReg":false,"regUserName":null,"regPassword":null}
[INFO] 2019-12-10 18:42:11.739 main.java.com.ha.util.Face$1.run(Face.java:61) 成功：[]
[INFO] 2019-12-10 18:42:16.377 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40420
[INFO] 2019-12-10 18:42:21.427 main.java.com.ha.facecamera.configserver.ConfigServer.messageReceived(ConfigServer.java:2172) 收到心跳消息/192.168.0.88:40420
[INFO] 2019-12-10 18:42:21.975 org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:984) Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7c214cc0: startup date [Tue Dec 10 18:40:48 CST 2019]; root of context hierarchy
[INFO] 2019-12-10 18:42:21.977 org.springframework.jmx.export.MBeanExporter.destroy(MBeanExporter.java:449) Unregistering JMX-exposed beans on shutdown
[INFO] 2019-12-10 18:42:21.978 org.springframework.jmx.support.MBeanRegistrationSupport.unregisterBeans(MBeanRegistrationSupport.java:241) Unregistering JMX-exposed beans
[INFO] 2019-12-10 18:42:21.986 com.alibaba.druid.pool.DruidDataSource.close(DruidDataSource.java:1615) {dataSource-1} closed
